{% extends "base.html" %} {% block title %}{% if edit %}Editar{% else %}Nuevo
{%endif %} producto - Almacén{% endblock %} {% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow-sm">
            <div class="card-body">
                <h1 class="h4 mb-3">
                    {% if edit %}Editar{% else %}Nuevo{% endif %} producto
                </h1>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">EPC (RFID)</label>
                            <!-- Most RFID readers act as a keyboard: focus this input and swipe -->
                            <input
                                type="text"
                                name="epc"
                                class="form-control"
                                required
                                id="id_epc"
                                value="{{ form.instance.epc|default_if_none:'' }}"
                            />
                            <div class="form-text">
                                Pasa el lector junto al producto para rellenar
                                el EPC.
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Nombre</label>
                            {{ form.nombre }}
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Aula</label>
                            {{ form.aula }}
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Estantería</label>
                            {{ form.estanteria }}
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Posición</label>
                            {{ form.posicion }}
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Cantidad</label>
                            {{ form.cantidad }}
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Nº de serie</label>
                            {{ form.n_serie }}
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Foto</label>
                            {{ form.foto }}
                        </div>
                        <div class="col-12">
                            <label class="form-label">Descripción</label>
                            {{ form.descripcion }}
                        </div>
                        <div class="col-12">
                            <label class="form-label">FDS (URL)</label>
                            {{ form.fds }}
                        </div>
                    </div>
                    <div class="mt-3 d-flex gap-2">
                        <a
                            class="btn btn-outline-secondary"
                            href="{% url 'almacen:inventory' %}"
                            >Cancelar</a
                        >
                        <button class="btn btn-primary" type="submit">
                            Guardar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    // Auto-focus EPC so the RFID "keyboard" fills it directly.
    document.getElementById("id_epc")?.focus();
</script>
{% endblock %}
